if getgenv().ManagerExecuted then return end getgenv().ManagerExecuted = true

-- Espera jogo carregar por completo
repeat task.wait() until game:IsLoaded()
repeat task.wait() until game:GetService("Players").LocalPlayer
repeat task.wait() until game:GetService("Players").LocalPlayer.Character
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui

-- Heartbeat
local running = true
task.spawn(function()
    while task.wait(4) and running do
        pcall(function()
            local code = game:GetService("GuiService"):GetErrorCode().Value
            if code == 1 or code == 769 or code == 773 or code == 2 
               or (code >= Enum.ConnectionError.DisconnectErrors.Value 
                   and code < Enum.ConnectionError.PlacelaunchOtherError.Value) then
                running = false
                return
            end
        end)

        if running then
            local player = game:GetService("Players").LocalPlayer
            local data = string.format(
                '{"playerName":"%s","time":%d}',
                player.Name,
                os.time() -- grava Unix time (segundos desde 1970)
            )
            pcall(function()
                writefile("checkyum.json", data)
            end)
        end
    end
end)

print("âœ… Heartbeat iniciado")

-- Delay controlado para garantir que o heartbeat gravou pelo menos uma vez
task.wait(6)

-- Hop
print("ðŸ“¦ Hop reenfileirado")
queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/iSaidBr/teste-qot/refs/heads/main/hop"))()')

-- Farming
print("ðŸš€ Executando AutoRob...")
script_key = "lqEDtgthalNLvLXEbzHnWZctJAQrwWNA"
loadstring(game:HttpGet("https://raw.githubusercontent.com/BlitzIsKing/UniversalFarm/refs/heads/main/Jailbreak/autoRob"))()
print("âœ… AutoRob executado")
